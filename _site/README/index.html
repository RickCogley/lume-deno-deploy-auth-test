<!DOCTYPE html>
<p><a href="https://github.com/rickcogley/lume-deno-deploy-auth-test/actions/workflows/deploy.yml"><img src="https://github.com/rickcogley/lume-deno-deploy-auth-test/actions/workflows/deploy.yml/badge.svg" alt="Deploy to Deno Deploy"></a></p>
<h1>Lume Deno Deploy HTTP Basic-Auth Test</h1>
<p>This test site uses the &quot;basicAuth&quot; module from the Lume middleware <code>basic_auth.ts</code>. Basic auth isn't super secure, but it's good enough for applications where light security is enough security.</p>
<p>It's deployed here: https://rickcogley-lume-deno-auth.deno.dev/
You can access the protected link, and the site should prompt for a username and password. Use these credentials:</p>
<ul>
<li>Username: lume</li>
<li>Password: iscool</li>
</ul>
<p>This setup assumes a few things:</p>
<ul>
<li>You're deploying to Deno Deploy, with an entry point of <code>serve.ts</code> and using a GitHub action, following the basic documentation for this style of deployment in the Lume docs.</li>
<li>The <code>serve.ts</code> is referencing the middleware, checking a specific path you want to protect, and is pulling the user's password from an environment var in the connected Deno Deploy project. When you set this in the json object that holds the username:password pairs in <code>serve.ts</code>, you'll notice you need to reference the var within backticks.</li>
<li>If users access the root <code>/</code>, there is no auth prompt, but if they access <code>/protected/</code> or <code>/protected/subfolder/</code>, directly in say, a &quot;private&quot; browser tab for testing, you'll see the typical HTTP basic_auth browser login prompt.</li>
<li>If you use this code as a starting point, you'll need to update the variable or variables in your Deno Deploy project, referencing them as needed, and update the Deno Deploy project name in the GitHub workflow <code>deploy.yml</code> file.</li>
</ul>
<p>Normally I'd put the built site files folder <code>_site</code> in <code>.gitignore</code> so they are not cluttering the repo, but for demo purposes so you can see how it's being built, I left it alone.</p>
<p>If you want to test the http-auth access again, just access the site or its subpaths in a private browser tab. Othwerwise your browser will cache the credentials.</p>
